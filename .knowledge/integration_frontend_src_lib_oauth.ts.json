{"is_source_file": true, "format": "TypeScript", "description": "This file contains OAuth helper utilities for initiating Atlassian OAuth flows, specifically for Jira and Confluence, using backend-driven PKCE. It includes functions to generate authentication URLs, handle redirects, and manage deprecated URL-building functions.", "external_files": ["./api"], "external_methods": ["getApiBaseUrl"], "published": ["getAtlassianAuthUrl", "buildOAuthLoginUrl", "getJiraAuthUrl", "GetAtlassianAuthUrlParams", "BuildOAuthLoginUrlOptions", "GetJiraAuthUrlParams"], "classes": [], "methods": [{"name": "export async function getAtlassianAuthUrl(params?: GetAtlassianAuthUrlParams): Promise<string> { getAtlassianAuthUrl", "description": "Fetches a URL from the backend /api/oauth/atlassian/login endpoint or constructs and returns a fallback URL, initiating the PKCE OAuth flow.", "scope": "", "scopeKind": ""}, {"name": "export function buildOAuthLoginUrl(_opts: BuildOAuthLoginUrlOptions): string { buildOAuthLoginUrl", "description": "Deprecated method that constructs the OAuth login URL for a provider, now superseded by getAtlassianAuthUrl.", "scope": "", "scopeKind": ""}, {"name": "export async function getJiraAuthUrl(params?: GetJiraAuthUrlParams): Promise<string> { getJiraAuthUrl", "description": "Deprecated method that returns a Jira OAuth URL via getAtlassianAuthUrl, including environment-specific return URL.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "getApiBaseUrl"], "search-terms": ["oauth", "atlassian", "pkce", "jira", "confluence", "OAuth helper", "URL generation"], "state": 2, "file_id": 59, "knowledge_revision": 214, "git_revision": "", "revision_history": [{"209": ""}, {"214": ""}], "ctags": [{"_type": "tag", "name": "BuildOAuthLoginUrlOptions", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export interface BuildOAuthLoginUrlOptions {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "GetAtlassianAuthUrlParams", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export interface GetAtlassianAuthUrlParams {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "GetJiraAuthUrlParams", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export interface GetJiraAuthUrlParams {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "Provider", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export type Provider = \"jira\" | \"confluence\";$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "backendBase", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const backendBase = getApiBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const base = backendBase || (typeof window !== \"undefined\" ? window.location.origin.replace(\\//", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const base = getApiBaseUrl() || (typeof window !== \"undefined\" ? window.location.origin.replac/", "language": "TypeScript", "kind": "constant", "scope": "buildOAuthLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "buildOAuthLoginUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export function buildOAuthLoginUrl(_opts: BuildOAuthLoginUrlOptions): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "ct", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const ct = resp.headers.get(\"Content-Type\") || \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^        const data = (await resp.json()) as { url?: string };$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "endpoint", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const endpoint = new URL(\"\\/api\\/oauth\\/atlassian\\/login\", base);$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "getAtlassianAuthUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export async function getAtlassianAuthUrl(params?: GetAtlassianAuthUrlParams): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getJiraAuthUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export async function getJiraAuthUrl(params?: GetJiraAuthUrlParams): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "location", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^      const location = resp.headers.get(\"Location\");$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  provider: Provider;$/", "language": "TypeScript", "kind": "property", "scope": "BuildOAuthLoginUrlOptions", "scopeKind": "interface"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const resp = await fetch(endpoint.toString(), {$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "returnUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const returnUrl = params?.returnUrl?.trim();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "returnUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const returnUrl =$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "returnUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  returnUrl?: string;$/", "language": "TypeScript", "kind": "property", "scope": "BuildOAuthLoginUrlOptions", "scopeKind": "interface"}, {"_type": "tag", "name": "returnUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  returnUrl?: string;$/", "language": "TypeScript", "kind": "property", "scope": "GetAtlassianAuthUrlParams", "scopeKind": "interface"}, {"_type": "tag", "name": "scope", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const scope = params?.scope?.trim();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "scope", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  scope?: string;$/", "language": "TypeScript", "kind": "property", "scope": "BuildOAuthLoginUrlOptions", "scopeKind": "interface"}, {"_type": "tag", "name": "scope", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  scope?: string;$/", "language": "TypeScript", "kind": "property", "scope": "GetAtlassianAuthUrlParams", "scopeKind": "interface"}, {"_type": "tag", "name": "scope", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  scope?: string;$/", "language": "TypeScript", "kind": "property", "scope": "GetJiraAuthUrlParams", "scopeKind": "interface"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const state = params?.state?.trim();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  state?: string;$/", "language": "TypeScript", "kind": "property", "scope": "BuildOAuthLoginUrlOptions", "scopeKind": "interface"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  state?: string;$/", "language": "TypeScript", "kind": "property", "scope": "GetAtlassianAuthUrlParams", "scopeKind": "interface"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  state?: string;$/", "language": "TypeScript", "kind": "property", "scope": "GetJiraAuthUrlParams", "scopeKind": "interface"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const u = new URL(\"\\/api\\/oauth\\/atlassian\\/login\", base);$/", "language": "TypeScript", "kind": "constant", "scope": "buildOAuthLoginUrl", "scopeKind": "function"}], "hash": "93b10540854552aa045a2c4db7fcec69", "format-version": 4, "code-base-name": "integration_frontend", "filename": "integration_frontend/src/lib/oauth.ts", "fields": [{"name": "export interface BuildOAuthLoginUrlOptions {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface GetAtlassianAuthUrlParams {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface GetJiraAuthUrlParams {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "provider: Provider;", "scope": "BuildOAuthLoginUrlOptions", "scopeKind": "interface", "description": "unavailable"}, {"name": "returnUrl?: string;", "scope": "BuildOAuthLoginUrlOptions", "scopeKind": "interface", "description": "unavailable"}, {"name": "scope?: string;", "scope": "BuildOAuthLoginUrlOptions", "scopeKind": "interface", "description": "unavailable"}, {"name": "state?: string;", "scope": "BuildOAuthLoginUrlOptions", "scopeKind": "interface", "description": "unavailable"}]}