{"is_source_file": true, "format": "TypeScript", "description": "This file provides frontend utility functions for constructing URLs and initiating OAuth flow with Atlassian, including environment variable handling, URL validation, and URL construction logic.", "external_files": ["process.env", "window", "URL", "URLSearchParams"], "external_methods": ["console.warn"], "published": ["getAtlassianAuthUrl", "getFrontendBaseUrl"], "classes": [], "methods": [{"name": "function getSafeOrigin(): string { getSafeOrigin", "description": "Computes a safe origin string from environment variables or browser window location, avoiding server errors.", "scope": "", "scopeKind": ""}, {"name": "function getBackendBaseUrl(): string { getBackendBaseUrl", "description": "Determines the backend base URL from environment variables or the safe origin, with fallback.", "scope": "", "scopeKind": ""}, {"name": "export async function getAtlassianAuthUrl(params: GetAtlassianAuthUrlParams): Promise<string> { getAtlassianAuthUrl", "description": "Constructs and returns the Atlassian OAuth authorization URL with appropriate query parameters based on input and environment.", "scope": "", "scopeKind": ""}, {"name": "export function getFrontendBaseUrl(): string { getFrontendBaseUrl", "description": "Returns the frontend base URL from environment variables or current window origin.", "scope": "", "scopeKind": ""}], "calls": ["getBackendBaseUrl", "getSafeOrigin", "new URL", "console.warn"], "search-terms": ["oauth", "atlassian", "authorization URL", "PKCE", "environment variable URL", "frontend base URL", "backend URL", "URL construction"], "state": 2, "file_id": 71, "knowledge_revision": 264, "git_revision": "", "revision_history": [{"257": ""}, {"264": ""}], "ctags": [{"_type": "tag", "name": "GetAtlassianAuthUrlParams", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export type GetAtlassianAuthUrlParams = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "backendBase", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const backendBase = getBackendBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "envBase", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const envBase = (process.env.NEXT_PUBLIC_FRONTEND_BASE_URL || \"\").trim().replace(\\/\\\\\\/*$\\/, \"/", "language": "TypeScript", "kind": "constant", "scope": "getFrontendBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "envBase", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const envBase =$/", "language": "TypeScript", "kind": "constant", "scope": "getBackendBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "envFrontend", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const envFrontend = (process.env.NEXT_PUBLIC_FRONTEND_BASE_URL || \"\").trim().replace(\\/\\\\\\/*$\\//", "language": "TypeScript", "kind": "constant", "scope": "getSafeOrigin", "scopeKind": "function"}, {"_type": "tag", "name": "fallback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const fallback = origin ? `${origin}\\/connect` : \"\\/connect\";$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "getAtlassianAuthUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export async function getAtlassianAuthUrl(params: GetAtlassianAuthUrlParams): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getBackendBaseUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^function getBackendBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getFrontendBaseUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export function getFrontendBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getSafeOrigin", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^function getSafeOrigin(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const origin = getSafeOrigin();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const origin = getSafeOrigin();$/", "language": "TypeScript", "kind": "constant", "scope": "getBackendBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const origin = getSafeOrigin();$/", "language": "TypeScript", "kind": "constant", "scope": "getFrontendBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "paramsObj", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const paramsObj = new URLSearchParams();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "qs", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const qs = paramsObj.toString();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "rel", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const rel = \"\\/api\\/oauth\\/atlassian\\/login\";$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "returnUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const { returnUrl, state, scope } = params;$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "scope", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const { returnUrl, state, scope } = params;$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const { returnUrl, state, scope } = params;$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}], "hash": "3fc9cecdb3581eef056f6766068f1fe3", "format-version": 4, "code-base-name": "integration_frontend", "filename": "integration_frontend/src/lib/oauth.ts"}