{"is_source_file": true, "format": "TypeScript", "description": "This file provides functions and types related to Atlassian OAuth (PKCE) flow, primarily for generating authorization URLs and handling frontend URL construction. It includes utility functions to compute backend and frontend base URLs, and a core method getAtlassianAuthUrl to generate the OAuth login URL with specified parameters.", "external_files": ["@/lib/oauth"], "external_methods": [], "published": ["getAtlassianAuthUrl", "getFrontendBaseUrl"], "classes": [], "methods": [{"name": "export async function getAtlassianAuthUrl(params: GetAtlassianAuthUrlParams): Promise<string> { getAtlassianAuthUrl", "description": "Generates a URL to initiate Atlassian OAuth login, including handling URL parameters and fallback mechanisms.", "scope": "", "scopeKind": ""}, {"name": "export function getFrontendBaseUrl(): string { getFrontendBaseUrl", "description": "Returns the current frontend base URL, either from environment variables or window location.", "scope": "", "scopeKind": ""}, {"name": "function getBackendBaseUrl(): string { getBackendBaseUrl", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getBackendBaseUrl", "URL", "console.warn"], "search-terms": ["Atlassian OAuth PKCE", "getAtlassianAuthUrl", "OAuth URL generation", "frontend backend URL", "URL construction", "OAuth redirect"], "state": 2, "file_id": 71, "knowledge_revision": 257, "git_revision": "", "ctags": [{"_type": "tag", "name": "GetAtlassianAuthUrlParams", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export type GetAtlassianAuthUrlParams = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "backendBase", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const backendBase = getBackendBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "envBase", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const envBase = (process.env.NEXT_PUBLIC_FRONTEND_BASE_URL || \"\").trim().replace(\\/\\\\\\/*$\\/, \"/", "language": "TypeScript", "kind": "constant", "scope": "getFrontendBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "envBase", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const envBase =$/", "language": "TypeScript", "kind": "constant", "scope": "getBackendBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "fallback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const fallback = origin ? `${origin}\\/connect` : \"\\/connect\";$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "getAtlassianAuthUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export async function getAtlassianAuthUrl(params: GetAtlassianAuthUrlParams): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getBackendBaseUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^function getBackendBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getFrontendBaseUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^export function getFrontendBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loginUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const loginUrl = new URL(\"\\/api\\/oauth\\/atlassian\\/login\", backendBase || window.location.orig/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^    const origin =$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "returnUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const { returnUrl, state, scope } = params;$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "scope", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const { returnUrl, state, scope } = params;$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/oauth.ts", "pattern": "/^  const { returnUrl, state, scope } = params;$/", "language": "TypeScript", "kind": "constant", "scope": "getAtlassianAuthUrl", "scopeKind": "function"}], "hash": "d8faa2dd89e9150221b8ad7cb9b91669", "format-version": 4, "code-base-name": "integration_frontend", "filename": "integration_frontend/src/lib/oauth.ts", "revision_history": [{"257": ""}]}