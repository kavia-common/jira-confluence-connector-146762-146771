{"is_source_file": true, "format": "TypeScript", "description": "This file contains utility functions and type definitions for interacting with backend API endpoints related to Jira and Confluence integrations. It includes functions for fetching project and page data, constructing URLs, and managing OAuth login flow, indicating it serves as a client-side API wrapper.", "external_files": ["fetch", "window", "external_methods", "fetch"], "external_methods": ["fetch"], "published": ["getApiBaseUrl", "buildBackendUrl", "fetchJiraProjects", "fetchConfluencePages", "getJiraLoginUrl", "JiraProjectRead", "ConfluencePageRead", "JiraProjectsFetchResponse", "ConfluencePagesFetchResponse", "JiraLoginApiResponse"], "classes": [], "methods": [{"name": "export function getApiBaseUrl(): string { getApiBaseUrl", "description": "Returns the base URL for the backend API, either from environment variables or defaults to same origin.", "scope": "", "scopeKind": ""}, {"name": "export function buildBackendUrl(path: string): string { buildBackendUrl", "description": "Constructs a full backend URL by prefixing with the base URL, or returns the path as-is for same-origin calls.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchJiraProjects(): Promise<JiraProjectsFetchResponse> { fetchJiraProjects", "description": "Fetches the list of Jira projects from the backend API.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchConfluencePages(): Promise<ConfluencePagesFetchResponse> { fetchConfluencePages", "description": "Fetches the list of Confluence pages from the backend API.", "scope": "", "scopeKind": ""}, {"name": "export async function getJiraLoginUrl(params?: { getJiraLoginUrl", "description": "Initiates the Jira OAuth login process by requesting an authorization URL from the backend, with optional parameters for state, scope, and return URL.", "scope": "", "scopeKind": ""}], "calls": ["buildBackendUrl(\"/integrations/jira/projects/fetch\")", "buildBackendUrl(\"/integrations/confluence/pages/fetch\")", "buildBackendUrl(\"/auth/jira/login\")", "fetch", "res.json()", "res.text()"], "search-terms": ["JiraProjectsFetchResponse", "ConfluencePagesFetchResponse", "getJiraLoginUrl", "buildBackendUrl", "fetchJiraProjects", "fetchConfluencePages"], "state": 2, "file_id": 35, "knowledge_revision": 122, "git_revision": "", "revision_history": [{"113": ""}, {"117": ""}, {"121": ""}, {"122": ""}], "ctags": [{"_type": "tag", "name": "ConfluencePageRead", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export type ConfluencePageRead = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ConfluencePagesFetchResponse", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export type ConfluencePagesFetchResponse = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "JiraLoginApiResponse", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export type JiraLoginApiResponse = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "JiraProjectRead", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export type JiraProjectRead = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "JiraProjectsFetchResponse", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export type JiraProjectsFetchResponse = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "authUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const authUrl =$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const base = buildBackendUrl(\"\\/auth\\/jira\\/login\");$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const base = getApiBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "buildBackendUrl", "scopeKind": "function"}, {"_type": "tag", "name": "buildBackendUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export function buildBackendUrl(path: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const callback = params?.returnUrl ?? `${origin}\\/oauth\\/jira`;$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const contentType = res.headers.get(\"content-type\") || \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const data = (body || {}) as JiraLoginApiResponse;$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "fetchConfluencePages", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export async function fetchConfluencePages(): Promise<ConfluencePagesFetchResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchJiraProjects", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export async function fetchJiraProjects(): Promise<JiraProjectsFetchResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export function getApiBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getJiraLoginUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^export async function getJiraLoginUrl(params?: {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "normalizedPath", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const normalizedPath = path.startsWith(\"\\/\") ? path : `\\/${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "buildBackendUrl", "scopeKind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const origin = typeof window !== \"undefined\" ? window.location.origin : \"http:\\/\\/localhost\";$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchConfluencePages", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchJiraProjects", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url.toString(), {$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "scope", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const scope = params?.scope;$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const state = params?.state;$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "fetchConfluencePages", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "fetchJiraProjects", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}, {"_type": "tag", "name": "trimmedBase", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const trimmedBase = base.endsWith(\"\\/\") ? base.slice(0, -1) : base;$/", "language": "TypeScript", "kind": "constant", "scope": "buildBackendUrl", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const url = buildBackendUrl(\"\\/integrations\\/confluence\\/pages\\/fetch\");$/", "language": "TypeScript", "kind": "constant", "scope": "fetchConfluencePages", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const url = buildBackendUrl(\"\\/integrations\\/jira\\/projects\\/fetch\");$/", "language": "TypeScript", "kind": "constant", "scope": "fetchJiraProjects", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/api.ts", "pattern": "/^  const url = new URL(base, origin);$/", "language": "TypeScript", "kind": "constant", "scope": "getJiraLoginUrl", "scopeKind": "function"}], "hash": "a60d5db057da17f47f83bebc8e19acef", "format-version": 4, "code-base-name": "integration_frontend", "filename": "integration_frontend/src/lib/api.ts"}