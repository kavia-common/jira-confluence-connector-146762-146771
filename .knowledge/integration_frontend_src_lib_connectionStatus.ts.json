{"is_source_file": true, "format": "TypeScript", "description": "This file defines types, functions, and logic for checking the connection status to an external service, particularly handling authentication and resource accessibility endpoints. It includes parsing responses, handling fallbacks, and exporting a main function to perform the status check.", "external_files": ["./url"], "external_methods": ["getBackendPublicBaseUrl"], "published": ["checkConnectionStatus"], "classes": [], "methods": [{"name": "function parseAuthStatusPayload(data: unknown): ConnectionStatus | null { parseAuthStatusPayload", "description": "Parses the response payload from the /auth/status endpoint into a ConnectionStatus object.", "scope": "", "scopeKind": ""}, {"name": "export async function checkConnectionStatus(): Promise<ConnectionStatus> { checkConnectionStatus", "description": "Main exported function that performs a multi-step process to determine the connectivity status with the backend and external resources.", "scope": "", "scopeKind": ""}], "calls": ["getBackendPublicBaseUrl", "fetch"], "search-terms": ["connectionStatus", "auth/status", "atlassian/resources", "checkConnectionStatus", "parseAuthStatusPayload"], "state": 2, "file_id": 84, "knowledge_revision": 323, "git_revision": "", "revision_history": [{"312": ""}, {"314": ""}, {"315": ""}, {"316": ""}, {"319": ""}, {"322": ""}, {"323": ""}], "ctags": [{"_type": "tag", "name": "CanonicalAuthStatusPayload", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^type CanonicalAuthStatusPayload = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ConnectionStatus", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^export type ConnectionStatus = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const message = e instanceof Error ? e.message : String(e);$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "account", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^        const account =$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "account", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^  const account =$/", "language": "TypeScript", "kind": "constant", "scope": "parseAuthStatusPayload", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^  const base = getBackendPublicBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "checkConnectionStatus", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^export async function checkConnectionStatus(): Promise<ConnectionStatus> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "cloudNameVal", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^        const cloudNameVal =$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "configOk", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const [configOk, healthOk] = await Promise.all([$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "connected", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^  const connected = typeof obj.connected === \"boolean\" ? obj.connected : null;$/", "language": "TypeScript", "kind": "constant", "scope": "parseAuthStatusPayload", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^        const data = await statusRes.json();$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const details = `Failed to reach status\\/resources. configOk=${configOk} healthOk=${healthOk/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const message = e instanceof Error ? e.message : String(e);$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "first", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^        const first = (data as Array<Record<string, unknown>>)[0];$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "first", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^        const first = resources[0];$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "healthOk", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const [configOk, healthOk] = await Promise.all([$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "instanceof", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const message = e instanceof Error ? e.message : String(e);$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const message = e instanceof Error ? e.message : String(e);$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^  const connected = typeof obj.connected === \"boolean\" ? obj.connected : null;$/", "language": "TypeScript", "kind": "constant", "scope": "parseAuthStatusPayload", "scopeKind": "function"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^  const obj = data as CanonicalAuthStatusPayload;$/", "language": "TypeScript", "kind": "constant", "scope": "parseAuthStatusPayload", "scopeKind": "function"}, {"_type": "tag", "name": "parseAuthStatusPayload", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^function parseAuthStatusPayload(data: unknown): ConnectionStatus | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^        const parsed = parseAuthStatusPayload(data);$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^  const provider =$/", "language": "TypeScript", "kind": "constant", "scope": "parseAuthStatusPayload", "scopeKind": "function"}, {"_type": "tag", "name": "providers", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^  const providers =$/", "language": "TypeScript", "kind": "constant", "scope": "parseAuthStatusPayload", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const res = await fetch(resourcesUrl, {$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "resources", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^        const resources = (data as Record<string, unknown>)$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "resourcesUrl", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const resourcesUrl = `${base}\\/api\\/atlassian\\/resources`;$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}, {"_type": "tag", "name": "statusRes", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/connectionStatus.ts", "pattern": "/^    const statusRes = await fetch(`${base}\\/auth\\/status`, {$/", "language": "TypeScript", "kind": "constant", "scope": "checkConnectionStatus", "scopeKind": "function"}], "hash": "c646d9ec95019274a6bf693e0f1ab284", "format-version": 4, "code-base-name": "integration_frontend", "filename": "integration_frontend/src/lib/connectionStatus.ts"}