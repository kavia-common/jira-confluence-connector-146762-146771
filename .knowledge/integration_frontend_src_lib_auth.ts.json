{"is_source_file": true, "format": "TypeScript", "description": "This file defines authentication-related functions for a frontend project, including fetching a CSRF token, storing it in memory, and performing login with credentials via API calls.", "external_files": ["@/lib/api"], "external_methods": ["buildBackendUrl"], "published": ["fetchCsrfToken", "getCsrfToken", "loginWithCredentials"], "classes": [], "methods": [{"name": "export async function fetchCsrfToken(): Promise<void> { fetchCsrfToken", "description": "Fetches a CSRF token from the backend and stores it in memory.", "scope": "", "scopeKind": ""}, {"name": "export function getCsrfToken(): string | null { getCsrfToken", "description": "Returns the stored CSRF token if available.", "scope": "", "scopeKind": ""}, {"name": "export async function loginWithCredentials(args: { loginWithCredentials", "description": "Performs a login by sending email and password to the backend, including CSRF token in the request.", "scope": "", "scopeKind": ""}], "calls": ["buildBackendUrl(\"/auth/csrf\")", "fetch", "res.ok", "res.text", "res.json", "buildBackendUrl(\"/auth/token\")"], "search-terms": ["auth", "CSRF", "login", "fetchCsrfToken", "typescript", "frontend authentication", "X-CSRF-Token"], "state": 2, "file_id": 91, "knowledge_revision": 461, "git_revision": "", "ctags": [{"_type": "tag", "name": "csrfTokenMemory", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^let csrfTokenMemory: string | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const data = (await res.json()) as { csrf?: string };$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const data = (await res.json().catch(() => ({}))) as { redirectUrl?: string };$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "fetchCsrfToken", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^export async function fetchCsrfToken(): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getCsrfToken", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^export function getCsrfToken(): string | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loginWithCredentials", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^export async function loginWithCredentials(args: {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const res = await fetch(url, { method: \"GET\" });$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const url = buildBackendUrl(\"\\/auth\\/csrf\");$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const url = buildBackendUrl(\"\\/auth\\/token\");$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}], "hash": "977e842cb2c356179b70c740660e2c06", "format-version": 4, "code-base-name": "integration_frontend", "filename": "integration_frontend/src/lib/auth.ts", "fields": [{"name": "let csrfTokenMemory: string | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"461": ""}]}