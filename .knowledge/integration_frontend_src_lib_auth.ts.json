{"is_source_file": true, "format": "TypeScript", "description": "This file contains utility functions for handling authentication, specifically fetching CSRF tokens, storing them in memory, and performing user login via credentials, with some internal helper functions.", "external_files": ["@/lib/api"], "external_methods": ["buildBackendUrl"], "published": ["fetchCsrfToken", "getCsrfToken", "loginWithCredentials"], "classes": [], "methods": [{"name": "export async function fetchCsrfToken(): Promise<string> { fetchCsrfToken", "description": "Retrieves CSRF token from the backend and stores it in memory for later use.", "scope": "", "scopeKind": ""}, {"name": "export function getCsrfToken(): string | null { getCsrfToken", "description": "Returns the in-memory stored CSRF token if previously fetched.", "scope": "", "scopeKind": ""}, {"name": "export async function loginWithCredentials(input: { loginWithCredentials", "description": "Performs a login request with user credentials, including CSRF token management, and handles the response.", "scope": "", "scopeKind": ""}, {"name": "async function safeJson<T>(res: Response): Promise<T | null> { safeJson", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function safeText(res: Response) { safeText", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "safeJson", "safeText"], "search-terms": ["fetchCsrfToken", "loginWithCredentials", "CSRF token", "auth", "auth.ts"], "state": 2, "file_id": 95, "knowledge_revision": 490, "git_revision": "", "revision_history": [{"486": ""}, {"489": ""}, {"490": ""}], "ctags": [{"_type": "tag", "name": "csrf", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const csrf = input.csrfToken || inMemoryCsrf || \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const data = await safeJson<{ redirectUrl?: string }>(res);$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const data = await safeJson<{$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "fetchCsrfToken", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^export async function fetchCsrfToken(): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getCsrfToken", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^export function getCsrfToken(): string | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "inMemoryCsrf", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^let inMemoryCsrf: string | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "loginWithCredentials", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^export async function loginWithCredentials(input: {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const res = await fetch(buildBackendUrl(\"\\/auth\\/csrf\"), {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const res = await fetch(buildBackendUrl(\"\\/auth\\/token\"), {$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "safeJson", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^async function safeJson<T>(res: Response): Promise<T | null> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "safeText", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^async function safeText(res: Response) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const token: string =$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "txt", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^    const txt = await safeText(res);$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "txt", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^    const txt = await safeText(res);$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}], "hash": "624cad5ee7edd93985340f2ed3a49dea", "format-version": 4, "code-base-name": "integration_frontend", "filename": "integration_frontend/src/lib/auth.ts", "fields": [{"name": "let inMemoryCsrf: string | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}