{"is_source_file": true, "format": "TypeScript", "description": "This source file 'auth.ts' provides helper functions for authentication flows, including fetching CSRF tokens and performing login with credentials. It manages CSRF tokens securely in memory and communicates with backend endpoints for authentication purposes.", "external_files": ["@/lib/api", "@/lib/csrf"], "external_methods": ["buildBackendUrl", "setCsrfToken", "getCsrfToken"], "published": ["fetchCsrfToken", "loginWithCredentials"], "classes": [], "methods": [{"name": "export async function fetchCsrfToken(): Promise<string> { fetchCsrfToken", "description": "Fetches a CSRF token from the backend endpoint, extracts it from JSON response, stores it in memory, and returns the token string.", "scope": "", "scopeKind": ""}, {"name": "export async function loginWithCredentials(params: { loginWithCredentials", "description": "Performs login by submitting email and password to backend, including CSRF token in headers. Returns success status and possibly a redirect URL.", "scope": "", "scopeKind": ""}], "calls": ["buildBackendUrl(\"/auth/csrf\")", "buildBackendUrl(\"/login\")", "setCsrfToken(token)", "getCsrfToken()", "fetch(url, ...)", "res.text()", "res.json()", "res.headers.get(...)"], "search-terms": ["CSRF token fetch", "login with credentials", "auth helper", "fetchCsrfToken", "loginWithCredentials", "CSRF in-memory storage", "frontend authentication"], "state": 2, "file_id": 81, "knowledge_revision": 422, "git_revision": "", "revision_history": [{"409": ""}, {"422": ""}], "ctags": [{"_type": "tag", "name": "csrfHeader", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const csrfHeader = params.csrf || getCsrfToken();$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const data = (await res.json().catch(() => ({}))) as Record<string, unknown>;$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const { email, password } = params;$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "fetchCsrfToken", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^export async function fetchCsrfToken(): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loginWithCredentials", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^export async function loginWithCredentials(params: {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const { email, password } = params;$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const token =$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const url = buildBackendUrl(\"\\/auth\\/csrf\");$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCsrfToken", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146771/integration_frontend/src/lib/auth.ts", "pattern": "/^  const url = buildBackendUrl(\"\\/login\");$/", "language": "TypeScript", "kind": "constant", "scope": "loginWithCredentials", "scopeKind": "function"}], "hash": "773264a3123f4584234cbd2a9fc30590", "format-version": 4, "code-base-name": "integration_frontend", "filename": "integration_frontend/src/lib/auth.ts"}